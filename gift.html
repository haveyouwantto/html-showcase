<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠ‚æ—¥å¿«ä¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
            overflow-y: hidden;
        }

        .container {
            position: relative;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .heart {
            position: relative;
            width: 120px;
            height: 120px;
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            user-select: none;
        }

        .decay {
            animation: decay 3s linear;
            animation-fill-mode: forwards;
        }

        .message {
            position: absolute;
            width: 360px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.75);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            pointer-events: none;
        }

        .message.active {
            opacity: 1;
            transform: translateY(0);
        }

        h1 {
            color: #ff3f3f;
            margin-bottom: 15px;
            font-size: 2em;
        }

        p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .flowers {
            position: fixed;
            width: 100%;
            height: 100%;
        }

        .flower {
            position: absolute;
            font-size: 24px;
            user-select: none;
            pointer-events: none;
            transform: translate(-50%, -50%);
        }

        @keyframes decay {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes fall {
            from {
                transform: translateY(-100px) rotate(0deg);
            }

            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        @keyframes fireworks {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            100% {
                transform: scale(10);
                opacity: 0;
            }
        }

        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffeb3b;
            border-radius: 50%;
            animation: fireworks 0.8s ease-out;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="flowers" id="flowers"></div>
        <div class="heart" id="heart">â¤ï¸</div>
        <div class="message" id="message">
            <h1>å¦‡å¥³èŠ‚å¿«ä¹ï¼</h1>
            <p>äº²çˆ±çš„å¦ˆå¦ˆï¼š<br>åœ¨è¿™ä¸ªå±äºæ‚¨çš„èŠ‚æ—¥é‡Œï¼Œç¥æ‚¨èŠ‚æ—¥å¿«ä¹ï¼<br>æ‚¨æ˜¯å®¶åº­çš„æ”¯æŸ±ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å­¦ä¹ çš„æ¦œæ ·ã€‚<br>æ„Ÿè°¢æ‚¨ä¸ºæˆ‘ä»¬åˆ›é€ çš„ä¸€åˆ‡ï¼Œæ„¿æ‚¨æ°¸è¿œå¥åº·ç¾ä¸½ï¼</p>
            <p>ğŸ’– ç¥æ‚¨å¦‡å¥³èŠ‚å¿«ä¹ï¼Œæ°¸è¿œçˆ±æ‚¨ï¼ ğŸ’–</p>
        </div>
    </div>

    <script>
        const heart = document.getElementById('heart');
        const message = document.getElementById('message');
        const flowers = document.getElementById('flowers');

        let start = false;

        // ç‚¹å‡»çˆ±å¿ƒè§¦å‘
        heart.addEventListener('click', () => {
            message.classList.add('active');
            createFireworks();
            if (!start) {
                createFlowers(window.innerWidth * 0.5, window.innerHeight * 0.5, 30);
                setInterval(() => {
                    for (let i = 0; i < 5; i++) {
                        const x = Math.random() * window.innerWidth;
                        const y = Math.random() * window.innerHeight;
                        createFlowers(x, y, 1);
                    }
                }, 2000);
                start = true;
            }
        });

        // åˆ›å»ºçƒŸèŠ±æ•ˆæœ
        function createFireworks() {
            for (let i = 0; i < 30; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                firework.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
                document.body.appendChild(firework);

                setTimeout(() => firework.remove(), 800);
            }
        }

        // ç‰©ç†å¼•æ“æ¨¡æ‹Ÿ
        class PhysicsEngine {
            constructor() {
                this.flowers = [];
                this.gravity = 0;
                this.bounce = 1;
                this.airResistance = 0.995;
                this.canvasWidth = window.innerWidth;
                this.canvasHeight = window.innerHeight;
                // æ£€æµ‹çª—å£å¤§å°å˜åŒ–
                window.addEventListener('resize', () => {
                    this.canvasWidth = window.innerWidth;
                    this.canvasHeight = window.innerHeight;
                });
                // æ–°å¢æ—‹è½¬å‚æ•°
                this.angularFriction = 0.97; // æ—‹è½¬æ‘©æ“¦åŠ›
                this.time = 0;
            }

            addFlower(flower, x, y) {
                const angle = Math.random() * Math.PI * 2;
                const power = Math.random() * 10;
                const physicsFlower = {
                    element: flower,
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * power,
                    vy: Math.sin(angle) * power,
                    radius: 12,
                    angle: 0,
                    angularVelocity: (Math.random() - 0.5) * 0.5, // åˆå§‹æ—‹è½¬é€Ÿåº¦
                };
                this.flowers.push(physicsFlower);
            }

            update() {
                let timeDelta = (performance.now() - this.time) / 10;
                this.time = performance.now();
                this.flowers.forEach((flower, index) => {
                    // åº”ç”¨ç‰©ç†
                    flower.vy += this.gravity;
                    flower.vx *= this.airResistance;
                    flower.vy *= this.airResistance;
                    // æ›´æ–°ä½ç½®
                    flower.x += flower.vx;
                    flower.y += flower.vy;
                    // è¾¹ç•Œç¢°æ’
                    if (flower.x < flower.radius) {
                        flower.x = flower.radius;
                        flower.vx *= -this.bounce;
                    }
                    if (flower.x > this.canvasWidth - flower.radius) {
                        flower.x = this.canvasWidth - flower.radius;
                        flower.vx *= -this.bounce;
                    }
                    if (flower.y < flower.radius) {
                        flower.y = flower.radius;
                        flower.vy *= -this.bounce;
                    }
                    if (flower.y > this.canvasHeight - flower.radius) {
                        flower.y = this.canvasHeight - flower.radius;
                        flower.vy *= -this.bounce;
                    }
                    flower.angle += flower.angularVelocity;
                    flower.angularVelocity *= this.angularFriction; // æ—‹è½¬è¡°å‡
                    // æ›´æ–°å…ƒç´ ä½ç½®
                    flower.element.style.left = `${flower.x}px`;
                    flower.element.style.top = `${flower.y}px`;
                    flower.element.style.transform =
                        `translate(-50%, -50%) rotate(${flower.angle}rad)`;
                    // ç¢°æ’æ£€æµ‹
                    this.checkCollisions(index);
                });
            }

            checkCollisions(currentIndex) {
                const current = this.flowers[currentIndex];
                for (let i = currentIndex + 1; i < this.flowers.length; i++) {
                    const other = this.flowers[i];
                    const dx = other.x - current.x;
                    const dy = other.y - current.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < current.radius + other.radius) {
                        // ç¢°æ’å¤„ç†
                        const angle = Math.atan2(dy, dx);
                        const overlap = current.radius + other.radius - distance;

                        // ä½ç½®ä¿®æ­£
                        current.x -= overlap * Math.cos(angle) * 0.5;
                        current.y -= overlap * Math.sin(angle) * 0.5;
                        other.x += overlap * Math.cos(angle) * 0.5;
                        other.y += overlap * Math.sin(angle) * 0.5;

                        // åŠ¨é‡äº¤æ¢ - æ ¹æ®æ³•å‘é€Ÿåº¦
                        const relativeVelocityX = current.vx - other.vx;
                        const relativeVelocityY = current.vy - other.vy;

                        // è®¡ç®—æ³•å‘é€Ÿåº¦åˆ†é‡
                        const normalVelocityX = relativeVelocityX * Math.cos(angle) + relativeVelocityY * Math.sin(angle);
                        const normalVelocityY = -relativeVelocityX * Math.sin(angle) + relativeVelocityY * Math.cos(angle);

                        // è®¡ç®—é€Ÿåº¦å˜åŒ–
                        const impulseX = normalVelocityX * (1 + this.bounce);
                        const impulseY = normalVelocityY * (1 + this.bounce);


                        // åº”ç”¨é€Ÿåº¦å˜åŒ– (å‡è®¾è´¨é‡ä¸º1)
                        current.vx -= impulseX * Math.cos(angle) * 0.5;
                        current.vy -= impulseX * Math.sin(angle) * 0.5;
                        other.vx += impulseX * Math.cos(angle) * 0.5;
                        other.vy += impulseX * Math.sin(angle) * 0.5;


                        // è§’é€Ÿåº¦è°ƒæ•´ - æ ¹æ®åˆ‡å‘é€Ÿåº¦
                        const tangentVelocityX = -relativeVelocityY;
                        const tangentVelocityY = relativeVelocityX;

                        // è®¡ç®—åˆ‡å‘åŠ¨é‡
                        const tangentMomentum = tangentVelocityX * Math.cos(angle) + tangentVelocityY * Math.sin(angle);

                        // è®¡ç®—è§’é€Ÿåº¦çš„å˜åŒ–é‡
                        const angularImpulse1 = tangentMomentum / current.radius * this.bounce;
                        const angularImpulse2 = -tangentMomentum / other.radius * this.bounce;

                        current.angularVelocity += angularImpulse1;
                        other.angularVelocity += angularImpulse2;

                        //é˜»å°¼ï¼Œé˜²æ­¢è§’é€Ÿåº¦æ— é™å¢åŠ 
                        current.angularVelocity *= 0.9;
                        other.angularVelocity *= 0.9;
                    }
                }
            }
        }


        const flowerContainer = document.getElementById('flowers')

        // åˆå§‹åŒ–ç‰©ç†å¼•æ“
        const physics = new PhysicsEngine();

        // ä¿®æ”¹åŸæœ‰èŠ±æœµåˆ›å»ºå‡½æ•°
        function createFlowers(x, y, count = 10) {
            const emojis = [
                'ğŸ’', 'ğŸŒ¹', 'ğŸŒº', 'ğŸŒ·', 'ğŸª·', 'ğŸŒ¸', 'ğŸ’®', 'ğŸµï¸', 'ğŸª»', 'ğŸŒ»',
                'ğŸŒ¼', 'ğŸ', 'ğŸŒ±', 'ğŸŒ¿', 'â˜˜ï¸', 'ğŸ€', 'ğŸ‚', 'ğŸ“', 'ğŸ’', 'ğŸ',
                'ğŸ‰', 'ğŸ‘', 'ğŸŠ', 'ğŸ¥­', 'ğŸ', 'ğŸŒ', 'ğŸ‹', 'ğŸˆ', 'ğŸ', 'ğŸ',
                'ğŸ¥', 'ğŸ«’', 'ğŸ«', 'ğŸ‡', 'ğŸ¥¥', 'ğŸ…', 'ğŸ‰', 'ğŸ€', 'ğŸ', 'ğŸ¥'
            ];
            for (let i = 0; i < count; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                flowerContainer.appendChild(flower);

                const startX = x;
                const startY = y;
                physics.addFlower(flower, startX, startY);

                // 30ç§’åç§»é™¤
                setTimeout(() => {
                    flower.classList.add('decay');
                }, 27000);
                setTimeout(() => {
                    flower.remove();
                    physics.flowers = physics.flowers.filter(f => f.element !== flower);
                }, 30000);
            }
        }

        // ç‰©ç†åŠ¨ç”»å¾ªç¯
        function animate() {
            physics.update();
            requestAnimationFrame(animate);
        }
        animate();

        flowerContainer.addEventListener('click', (e) => {
            // create flowers at the clicked position
            createFlowers(e.clientX, e.clientY, 2);
        });
    </script>
</body>

</html>